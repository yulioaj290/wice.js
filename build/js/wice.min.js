"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ORDER_TYPE_ALPHA=0,ORDER_TYPE_NUM=1,CanvasExercise=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM;_classCallCheck(this,t),this._canvasElementId=e,this._canvasElement=document.getElementById(this._canvasElementId),this._canvasWidth=i,this._canvasDivisor=0,this._imageSrc=s,this._lineWidth=n,this._lineColor=o,this._lineHead=r,this._fontFamily=a,this._fontSize=l,this._fontColor=c,this._fontStyle=h,this._fontAlign=d,this._fontBaseline=_,this._mark=v,this._orderType=g}return _createClass(t,[{key:"getMark",value:function(){return this._mark}},{key:"initializeCanvas",value:function(){if(this._canvasElement.getContext){var t=new Image;t.addEventListener("load",this._onLoadImage.bind(this),!1),t.src=this._imageSrc}}},{key:"clickAction",value:function(t){}},{key:"_onLoadImage",value:function(t){var e=t.currentTarget,i=e.width,s=e.height,n=this._canvasElement.getContext("2d");this._canvasDivisor=i/this._canvasWidth;var o=Math.round(i/this._canvasDivisor),r=Math.round(s/this._canvasDivisor);this._canvasElement.setAttribute("width",o.toString()),this._canvasElement.setAttribute("height",r.toString()),n.drawImage(e,0,0,i,s,0,0,o,r)}}],[{key:"orderTypeAlpha",get:function(){return ORDER_TYPE_ALPHA}},{key:"orderTypeNum",get:function(){return ORDER_TYPE_NUM}}]),t}();CanvasExercise.exports=CanvasExercise;var AssociateCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:[],C=!(arguments.length>16&&void 0!==arguments[16])||arguments[16];_classCallCheck(this,e);var O=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return O._listObjectsCoords=u,O._listObjectsConnections=f,O._listObjectsAssociated=[],O._strokeRectObject=C,O._beginClickCoord=[],O._numberAssociationsConnected=0,O._canvasElement.addEventListener("click",O.clickAction.bind(O),!1),O}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d");if(this._numberAssociationsConnected<this._getNumberOfConnections()){if(0===this._beginClickCoord.length)this._beginClickCoord=[e,i];else{var n=this._findObjectThroughCoords(this._beginClickCoord),o=this._findObjectThroughCoords([e,i]),r=this._findConnection(n,o);n&&o&&(1===r?this._listObjectsAssociated.push([n,o]):0===r&&this._listObjectsAssociated.push([o,n])),s.lineWidth=this._lineWidth,s.strokeStyle=this._lineColor,s.beginPath(),s.moveTo(this._beginClickCoord[0],this._beginClickCoord[1]),s.lineTo(e,i),s.stroke(),this._numberAssociationsConnected++,this._beginClickCoord=[]}return this.getListObjectsAssociated()}}}},{key:"_findConnection",value:function(t,e){return this._findEndCoordsInConnections(e,this._findBeginCoordsInConnections(t))?1:this._findEndCoordsInConnections(t,this._findBeginCoordsInConnections(e))?0:-1}},{key:"_findBeginCoordsInConnections",value:function(t){for(var e=0;e<this._listObjectsCoords.length;e++){if(JSON.stringify(this._listObjectsCoords[e])===JSON.stringify(t))return e}}},{key:"_findEndCoordsInConnections",value:function(t,e){for(var i=0;i<this._listObjectsConnections[e].length;i++){if(JSON.stringify(this._listObjectsConnections[e][i])===JSON.stringify(t))return!0}return!1}},{key:"_findObjectThroughCoords",value:function(t){for(var e=void 0,i=void 0,s=void 0,n=void 0,o=0;o<this._listObjectsCoords.length;o++)if(e=Math.round(this._listObjectsCoords[o][0]/this._canvasDivisor),i=Math.round(this._listObjectsCoords[o][1]/this._canvasDivisor),s=Math.round(this._listObjectsCoords[o][2]/this._canvasDivisor),n=Math.round(this._listObjectsCoords[o][3]/this._canvasDivisor),e<=t[0]&&t[0]<=s&&i<=t[1]&&t[1]<=n)return this._listObjectsCoords[o];return!1}},{key:"_getNumberOfConnections",value:function(){for(var t=0,e=0;e<this._listObjectsConnections.length;e++)t+=this._listObjectsConnections[e].length;return t}},{key:"getListObjectsAssociated",value:function(){return console.log(JSON.stringify(this._listObjectsAssociated)),this._listObjectsAssociated}}]),e}();AssociateCanvasExercise.exports=AssociateCanvasExercise;var GapMatchCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:[],C=!(arguments.length>16&&void 0!==arguments[16])||arguments[16];_classCallCheck(this,e);var O=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return O._listObjectsCoords=u,O._listObjectsTags=f,O._listObjectsTagged=[],O._strokeRectObject=C,O._canvasElement.addEventListener("click",O.clickAction.bind(O),!1),O}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d");if(!this._isTaggedExercise(this._listObjectsTagged,[e,i],this._canvasDivisor,this._listObjectsTags.length))for(var n=void 0,o=void 0,r=void 0,a=void 0,l=void 0,c=void 0,h=void 0,d=0;d<this._listObjectsCoords.length&&(n=Math.round(this._listObjectsCoords[d][0]/this._canvasDivisor),o=Math.round(this._listObjectsCoords[d][1]/this._canvasDivisor),r=Math.round(this._listObjectsCoords[d][2]/this._canvasDivisor),a=Math.round(this._listObjectsCoords[d][3]/this._canvasDivisor),s.font=this._fontStyle+" "+this._fontSize+"  "+this._fontFamily,s.fillStyle=this._fontColor,s.textAlign=this._fontAlign,s.textBaseline=this._fontBaseline,h=!1,n<=e&&e<=r&&o<=i&&i<=a&&this._listObjectsTags.length>0&&(l=Math.round(r-(r-n)/2),c=Math.round(a-(a-o)/2),s.fillText(this._listObjectsTags[0],l,c),this._strokeRectObject&&(s.lineWidth=this._lineWidth,s.strokeStyle=this._lineColor,s.strokeRect(n,o,r-n,a-o)),this._listObjectsTagged[this._listObjectsTagged.length]=[this._listObjectsTags.shift(),this._listObjectsCoords[d]],h=!0),!h);d++);}}},{key:"getListObjectsCoords",value:function(){return console.log(JSON.stringify(this._listObjectsCoords)),this._listObjectsCoords}},{key:"getListObjectsTags",value:function(){return console.log(JSON.stringify(this._listObjectsTags)),this._listObjectsTags}},{key:"getListObjectsTagged",value:function(){return console.log(JSON.stringify(this._listObjectsTagged)),this._listObjectsTagged}},{key:"_isTaggedExercise",value:function(t,e,i,s){for(var n=0;n<t.length;n++){var o=Math.round(t[n][0]/i),r=Math.round(t[n][1]/i),a=Math.round(t[n][2]/i),l=Math.round(t[n][3]/i);if(o<=e[0]&&e[0]<=a&&r<=e[1]&&e[1]<=l&&s>0)return!0}return!1}}]),e}();GapMatchCanvasExercise.exports=GapMatchCanvasExercise;var OrderCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=!(arguments.length>15&&void 0!==arguments[15])||arguments[15];_classCallCheck(this,e);var C=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return C._listObjectsCoords=u,C._listObjectsOrdered=[],C._lastOrderNumber=0,C._strokeRectObject=f,C._canvasElement.addEventListener("click",C.clickAction.bind(C),!1),C}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d"),n=this._listObjectsCoords.length;if(!this._isOrderedExercise(this._listObjectsOrdered,[e,i],this._canvasDivisor,this._lastOrderNumber,n)){for(var o=void 0,r=void 0,a=void 0,l=void 0,c=void 0,h=void 0,d=void 0,_=void 0,v=0;v<this._listObjectsCoords.length&&(o=Math.round(this._listObjectsCoords[v][0]/this._canvasDivisor),r=Math.round(this._listObjectsCoords[v][1]/this._canvasDivisor),a=Math.round(this._listObjectsCoords[v][2]/this._canvasDivisor),l=Math.round(this._listObjectsCoords[v][3]/this._canvasDivisor),s.font=this._fontStyle+" "+this._fontSize+"  "+this._fontFamily,s.fillStyle=this._fontColor,s.textAlign=this._fontAlign,s.textBaseline=this._fontBaseline,_=!1,o<=e&&e<=a&&r<=i&&i<=l&&this._lastOrderNumber<n&&(this._lastOrderNumber++,c=Math.round(a-(a-o)/2),h=Math.round(l-(l-r)/2),d=this._lastOrderNumber.toString(),this._orderType===CanvasExercise.orderTypeAlpha&&(d=(Math.floor(this._lastOrderNumber/26)>=1?String.fromCharCode(64+this._lastOrderNumber/26):"")+String.fromCharCode(64+this._lastOrderNumber%26)),s.fillText(d,c,h),this._strokeRectObject&&(s.lineWidth=this._lineWidth,s.strokeStyle=this._lineColor,s.strokeRect(o,r,a-o,l-r)),this._listObjectsOrdered[this._listObjectsOrdered.length]=this._listObjectsCoords[v],_=!0),!_);v++);return this.getListObjectsOrdered()}}}},{key:"_isOrderedExercise",value:function(t,e,i,s,n){for(var o=0;o<t.length;o++){var r=Math.round(t[o][0]/i),a=Math.round(t[o][1]/i),l=Math.round(t[o][2]/i),c=Math.round(t[o][3]/i);if(r<=e[0]&&e[0]<=l&&a<=e[1]&&e[1]<=c&&s<n)return!0}return!1}},{key:"getListObjectsOrdered",value:function(){return console.log(JSON.stringify(this._listObjectsOrdered)),this._listObjectsOrdered}}]),e}();OrderCanvasExercise.exports=OrderCanvasExercise;var PositionObjectCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=!(arguments.length>15&&void 0!==arguments[15])||arguments[15];_classCallCheck(this,e);var C=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return C._listObjectsCoords=u,C._listObjectsAssociated=[],C._strokeRectObject=f,C._numberAssociationsConnected=0,C._canvasElement.addEventListener("click",C.clickAction.bind(C),!1),C}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d");if(this._numberAssociationsConnected<this._listObjectsCoords.length){var n=void 0,o=void 0,r=void 0,a=void 0,l=void 0;s.font=this._fontStyle+" "+this._fontSize+"  "+this._fontFamily,s.fillStyle=this._fontColor,s.textAlign=this._fontAlign,s.textBaseline=this._fontBaseline,s.fillText(this._mark,e,i),this._numberAssociationsConnected++;for(var c=0;c<this._listObjectsCoords.length&&(n=Math.round(this._listObjectsCoords[c][0]/this._canvasDivisor),o=Math.round(this._listObjectsCoords[c][1]/this._canvasDivisor),r=Math.round(this._listObjectsCoords[c][2]/this._canvasDivisor),a=Math.round(this._listObjectsCoords[c][3]/this._canvasDivisor),l=!1,n<=e&&e<=r&&o<=i&&i<=a&&(this._strokeRectObject&&(s.lineWidth=this._lineWidth,s.strokeStyle=this._lineColor,s.strokeRect(n,o,r-n,a-o)),this._listObjectsAssociated[this._listObjectsAssociated.length]=this._listObjectsCoords[c],l=!0),!l);c++);return this.getListObjectsPositioned()}}}},{key:"getListObjectsPositioned",value:function(){return console.log(JSON.stringify(this._listObjectsAssociated)),this._listObjectsAssociated}}]),e}();PositionObjectCanvasExercise.exports=PositionObjectCanvasExercise;var coords=[[80,35,375,283],[395,120,715,370],[36,352,88,404],[520,20,590,76]],connections=[[[36,352,88,404],[520,20,590,76]],[[36,352,88,404]],[[395,120,715,370],[520,20,590,76]],[[80,35,375,283],[395,120,715,370]]],ex=new AssociateCanvasExercise("myCanvas");ex._listObjectsCoords=coords,ex._listObjectsConnections=connections,ex._canvasWidth=700,ex._imageSrc="img/plasma-desktop.jpg",ex.initializeCanvas();for(var marks=[],i=0;i<ex._getNumberOfConnections();i++)marks[i]=" | ";document.getElementById("options").innerText=JSON.stringify(marks),ex._canvasElement.addEventListener("click",function(){0===ex._beginClickCoord.length&&(marks.shift(),document.getElementById("options").innerText=JSON.stringify(marks),document.getElementById("result").innerText=JSON.stringify(ex.getListObjectsAssociated()))},!1),console.log(ex);