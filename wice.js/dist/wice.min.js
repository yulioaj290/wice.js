"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ORDER_TYPE_ALPHA=0,ORDER_TYPE_NUM=1,CanvasExercise=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM;_classCallCheck(this,t),this.canvasElementId=e,this._canvasElement=document.getElementById(this.canvasElementId),this.canvasWidth=i,this._canvasDivisor=0,this.imageSrc=s,this.lineWidth=n,this.lineColor=o,this.lineHead=r,this.fontFamily=a,this.fontSize=l,this.fontColor=c,this.fontStyle=h,this.fontAlign=d,this.fontBaseline=_,this.mark=v,this.orderType=g}return _createClass(t,[{key:"getMark",value:function(){return this.mark}},{key:"initializeCanvas",value:function(){if(this._canvasElement.getContext){var t=new Image;t.addEventListener("load",this._onLoadImage.bind(this),!1),t.src=this.imageSrc}}},{key:"clickAction",value:function(t){}},{key:"_onLoadImage",value:function(t){var e=t.currentTarget,i=e.width,s=e.height,n=this._canvasElement.getContext("2d");this._canvasDivisor=i/this.canvasWidth;var o=Math.round(i/this._canvasDivisor),r=Math.round(s/this._canvasDivisor);this._canvasElement.setAttribute("width",o.toString()),this._canvasElement.setAttribute("height",r.toString()),n.drawImage(e,0,0,i,s,0,0,o,r)}}],[{key:"orderTypeAlpha",get:function(){return ORDER_TYPE_ALPHA}},{key:"orderTypeNum",get:function(){return ORDER_TYPE_NUM}}]),t}();CanvasExercise.exports=CanvasExercise;var AssociateCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:[],C=!(arguments.length>16&&void 0!==arguments[16])||arguments[16];_classCallCheck(this,e);var O=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return O.listObjectsCoords=u,O.listObjectsConnections=f,O._listObjectsAssociated=[],O.strokeRectObject=C,O._beginClickCoord=[],O._numberAssociationsConnected=0,O._canvasElement.addEventListener("click",O.clickAction.bind(O),!1),O}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d");if(this._numberAssociationsConnected<this._getNumberOfConnections()){if(0===this._beginClickCoord.length)this._beginClickCoord=[e,i];else{var n=this._findObjectThroughCoords(this._beginClickCoord),o=this._findObjectThroughCoords([e,i]),r=this._findConnection(n,o);n&&o&&(1===r?this._listObjectsAssociated.push([n,o]):0===r&&this._listObjectsAssociated.push([o,n])),s.lineWidth=this.lineWidth,s.strokeStyle=this.lineColor,s.beginPath(),s.moveTo(this._beginClickCoord[0],this._beginClickCoord[1]),s.lineTo(e,i),s.stroke(),this._numberAssociationsConnected++,this._beginClickCoord=[]}return this.getListObjectsAssociated()}}}},{key:"_findConnection",value:function(t, e){return this._findEndCoordsInConnections(e,this._findBeginCoordsInConnections(t))?1:this._findEndCoordsInConnections(t,this._findBeginCoordsInConnections(e))?0:-1}},{key:"_findBeginCoordsInConnections",value:function(t){for(var e=0; e<this.listObjectsCoords.length; e++){if(JSON.stringify(this.listObjectsCoords[e])===JSON.stringify(t))return e}}},{key:"_findEndCoordsInConnections",value:function(t, e){for(var i=0; i<this.listObjectsConnections[e].length; i++){if(JSON.stringify(this.listObjectsConnections[e][i])===JSON.stringify(t))return!0}return!1}},{key:"_findObjectThroughCoords",value:function(t){for(var e=void 0,i=void 0,s=void 0,n=void 0,o=0; o<this.listObjectsCoords.length; o++)if(e=Math.round(this.listObjectsCoords[o][0]/this._canvasDivisor),i=Math.round(this.listObjectsCoords[o][1]/this._canvasDivisor),s=Math.round(this.listObjectsCoords[o][2]/this._canvasDivisor),n=Math.round(this.listObjectsCoords[o][3]/this._canvasDivisor),e<=t[0]&&t[0]<=s&&i<=t[1]&&t[1]<=n)return this.listObjectsCoords[o];return!1}},{key:"_getNumberOfConnections",value:function(){for(var t=0,e=0; e<this.listObjectsConnections.length; e++)t+=this.listObjectsConnections[e].length;return t}},{key:"getListObjectsAssociated",value:function(){return console.log(JSON.stringify(this._listObjectsAssociated)),this._listObjectsAssociated}}]),e}();AssociateCanvasExercise.exports=AssociateCanvasExercise;var GapMatchCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:[],C=!(arguments.length>16&&void 0!==arguments[16])||arguments[16];_classCallCheck(this,e);var O=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return O.listObjectsCoords=u,O.listObjectsTags=f,O._listObjectsTagged=[],O.strokeRectObject=C,O._canvasElement.addEventListener("click",O.clickAction.bind(O),!1),O}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d");if(!this._isTaggedExercise(this._listObjectsTagged,[e,i],this._canvasDivisor,this.listObjectsTags.length))for(var n=void 0,o=void 0,r=void 0,a=void 0,l=void 0,c=void 0,h=void 0,d=0; d<this.listObjectsCoords.length&&(n=Math.round(this.listObjectsCoords[d][0]/this._canvasDivisor),o=Math.round(this.listObjectsCoords[d][1]/this._canvasDivisor),r=Math.round(this.listObjectsCoords[d][2]/this._canvasDivisor),a=Math.round(this.listObjectsCoords[d][3]/this._canvasDivisor),s.font=this.fontStyle+" "+this.fontSize+"  "+this.fontFamily,s.fillStyle=this.fontColor,s.textAlign=this.fontAlign,s.textBaseline=this.fontBaseline,h=!1,n<=e&&e<=r&&o<=i&&i<=a&&this.listObjectsTags.length>0&&(l=Math.round(r-(r-n)/2),c=Math.round(a-(a-o)/2),s.fillText(this.listObjectsTags[0],l,c),this.strokeRectObject&&(s.lineWidth=this.lineWidth,s.strokeStyle=this.lineColor,s.strokeRect(n,o,r-n,a-o)),this._listObjectsTagged[this._listObjectsTagged.length]=[this.listObjectsTags.shift(),this.listObjectsCoords[d]],h=!0),!h); d++);}}},{key:"getListObjectsCoords",value:function(){return console.log(JSON.stringify(this.listObjectsCoords)),this.listObjectsCoords}},{key:"getListObjectsTags",value:function(){return console.log(JSON.stringify(this.listObjectsTags)),this.listObjectsTags}},{key:"getListObjectsTagged",value:function(){return console.log(JSON.stringify(this._listObjectsTagged)),this._listObjectsTagged}},{key:"_isTaggedExercise",value:function(t, e, i, s){for(var n=0; n<t.length; n++){var o=Math.round(t[n][0]/i),r=Math.round(t[n][1]/i),a=Math.round(t[n][2]/i),l=Math.round(t[n][3]/i);if(o<=e[0]&&e[0]<=a&&r<=e[1]&&e[1]<=l&&s>0)return!0}return!1}}]),e}();GapMatchCanvasExercise.exports=GapMatchCanvasExercise;var OrderCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=!(arguments.length>15&&void 0!==arguments[15])||arguments[15];_classCallCheck(this,e);var C=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return C.listObjectsCoords=u,C._listObjectsOrdered=[],C._lastOrderNumber=0,C.strokeRectObject=f,C._canvasElement.addEventListener("click",C.clickAction.bind(C),!1),C}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d"),n=this.listObjectsCoords.length;if(!this._isOrderedExercise(this._listObjectsOrdered,[e,i],this._canvasDivisor,this._lastOrderNumber,n)){for(var o=void 0,r=void 0,a=void 0,l=void 0,c=void 0,h=void 0,d=void 0,_=void 0,v=0; v<this.listObjectsCoords.length&&(o=Math.round(this.listObjectsCoords[v][0]/this._canvasDivisor),r=Math.round(this.listObjectsCoords[v][1]/this._canvasDivisor),a=Math.round(this.listObjectsCoords[v][2]/this._canvasDivisor),l=Math.round(this.listObjectsCoords[v][3]/this._canvasDivisor),s.font=this.fontStyle+" "+this.fontSize+"  "+this.fontFamily,s.fillStyle=this.fontColor,s.textAlign=this.fontAlign,s.textBaseline=this.fontBaseline,_=!1,o<=e&&e<=a&&r<=i&&i<=l&&this._lastOrderNumber<n&&(this._lastOrderNumber++,c=Math.round(a-(a-o)/2),h=Math.round(l-(l-r)/2),d=this._lastOrderNumber.toString(),this.orderType===CanvasExercise.orderTypeAlpha&&(d=(Math.floor(this._lastOrderNumber/26)>=1?String.fromCharCode(64+this._lastOrderNumber/26):"")+String.fromCharCode(64+this._lastOrderNumber%26)),s.fillText(d,c,h),this.strokeRectObject&&(s.lineWidth=this.lineWidth,s.strokeStyle=this.lineColor,s.strokeRect(o,r,a-o,l-r)),this._listObjectsOrdered[this._listObjectsOrdered.length]=this.listObjectsCoords[v],_=!0),!_); v++);return this.getListObjectsOrdered()}}}},{key:"_isOrderedExercise",value:function(t, e, i, s, n){for(var o=0; o<t.length; o++){var r=Math.round(t[o][0]/i),a=Math.round(t[o][1]/i),l=Math.round(t[o][2]/i),c=Math.round(t[o][3]/i);if(r<=e[0]&&e[0]<=l&&a<=e[1]&&e[1]<=c&&s<n)return!0}return!1}},{key:"getListObjectsOrdered",value:function(){return console.log(JSON.stringify(this._listObjectsOrdered)),this._listObjectsOrdered}}]),e}();OrderCanvasExercise.exports=OrderCanvasExercise;var PositionObjectCanvasExercise=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Arial",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"20",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000000",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"regular",d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"center",_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"middle",v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"X",g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:ORDER_TYPE_NUM,u=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],f=!(arguments.length>15&&void 0!==arguments[15])||arguments[15];_classCallCheck(this,e);var C=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n,o,r,a,l,c,h,d,_,v,g));return C.listObjectsCoords=u,C._listObjectsAssociated=[],C.strokeRectObject=f,C._numberAssociationsConnected=0,C._canvasElement.addEventListener("click",C.clickAction.bind(C),!1),C}return _inherits(e,CanvasExercise),_createClass(e,[{key:"clickAction",value:function(t){var e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop;if(this._canvasElement.getContext){var s=this._canvasElement.getContext("2d");if(this._numberAssociationsConnected<this.listObjectsCoords.length){var n=void 0,o=void 0,r=void 0,a=void 0,l=void 0;s.font=this.fontStyle+" "+this.fontSize+"  "+this.fontFamily,s.fillStyle=this.fontColor,s.textAlign=this.fontAlign,s.textBaseline=this.fontBaseline,s.fillText(this.mark,e,i),this._numberAssociationsConnected++;for(var c=0; c<this.listObjectsCoords.length&&(n=Math.round(this.listObjectsCoords[c][0]/this._canvasDivisor),o=Math.round(this.listObjectsCoords[c][1]/this._canvasDivisor),r=Math.round(this.listObjectsCoords[c][2]/this._canvasDivisor),a=Math.round(this.listObjectsCoords[c][3]/this._canvasDivisor),l=!1,n<=e&&e<=r&&o<=i&&i<=a&&(this.strokeRectObject&&(s.lineWidth=this.lineWidth,s.strokeStyle=this.lineColor,s.strokeRect(n,o,r-n,a-o)),this._listObjectsAssociated[this._listObjectsAssociated.length]=this.listObjectsCoords[c],l=!0),!l); c++);return this.getListObjectsPositioned()}}}},{key:"getListObjectsPositioned",value:function(){return console.log(JSON.stringify(this._listObjectsAssociated)),this._listObjectsAssociated}}]),e}();PositionObjectCanvasExercise.exports=PositionObjectCanvasExercise;